### ========================================
### QUEZI API - ADMIN ENDPOINTS
### ========================================

@baseUrl = http://localhost:3333/api/v1
@adminEmail = admin@quezi.com
@adminPassword = Admin@2025
@adminToken = {{login.response.body.token}}

### ========================================
### AUTENTICAÇÃO ADMIN
### ========================================

### 1. Login de Admin
# @name login
POST {{baseUrl}}/admin/auth/login
Content-Type: application/json

{
  "email": "{{adminEmail}}",
  "password": "{{adminPassword}}"
}

### 2. Buscar Sessão Atual
GET {{baseUrl}}/admin/auth/session
Authorization: Bearer {{adminToken}}

### ========================================
### GESTÃO DE ADMINS
### ========================================

### 3. Listar Admins
GET {{baseUrl}}/admin/admins?page=1&limit=10
Authorization: Bearer {{adminToken}}

### 4. Buscar Admin por ID
GET {{baseUrl}}/admin/admins/clx_admin_id_aqui
Authorization: Bearer {{adminToken}}

### 5. Criar Novo Admin (apenas SUPER_ADMIN)
POST {{baseUrl}}/admin/admins
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "email": "moderator@quezi.com",
  "password": "Moderator@2025",
  "name": "Moderador Principal",
  "role": "MODERATOR"
}

### 6. Atualizar Admin (apenas SUPER_ADMIN)
PUT {{baseUrl}}/admin/admins/clx_admin_id_aqui
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "name": "Nome Atualizado",
  "role": "ADMIN",
  "isActive": true
}

### 7. Trocar Senha
PUT {{baseUrl}}/admin/admins/clx_admin_id_aqui/password
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "currentPassword": "Admin@2025",
  "newPassword": "NovaSenh@2025"
}

### 8. Deletar Admin (apenas SUPER_ADMIN)
DELETE {{baseUrl}}/admin/admins/clx_admin_id_aqui
Authorization: Bearer {{adminToken}}

### ========================================
### GESTÃO DE USUÁRIOS
### ========================================

### 9. Listar Todos os Usuários
GET {{baseUrl}}/admin/users?page=1&limit=20&userType=PROFESSIONAL&search=João&sortBy=createdAt&sortOrder=desc
Authorization: Bearer {{adminToken}}

### 10. Buscar Detalhes de Usuário
GET {{baseUrl}}/admin/users/clx_user_id_aqui
Authorization: Bearer {{adminToken}}

### 11. Suspender Usuário
PUT {{baseUrl}}/admin/users/clx_user_id_aqui/suspend
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "reason": "Violação dos termos de uso da plataforma - comportamento inadequado",
  "permanent": false,
  "suspendedUntil": "2025-12-31T23:59:59Z"
}

### 12. Suspender Usuário Permanentemente
PUT {{baseUrl}}/admin/users/clx_user_id_aqui/suspend
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "reason": "Violação grave e recorrente dos termos de uso",
  "permanent": true
}

### 13. Ativar Usuário (Remover Suspensão)
PUT {{baseUrl}}/admin/users/clx_user_id_aqui/activate
Authorization: Bearer {{adminToken}}

### 14. Deletar Usuário Permanentemente (apenas SUPER_ADMIN)
DELETE {{baseUrl}}/admin/users/clx_user_id_aqui
Authorization: Bearer {{adminToken}}

### ========================================
### ANALYTICS E DASHBOARD
### ========================================

### 15. Dashboard Principal
GET {{baseUrl}}/admin/dashboard
Authorization: Bearer {{adminToken}}

### 16. Estatísticas de Usuários - Dia
GET {{baseUrl}}/admin/stats/users?period=day&userType=ALL
Authorization: Bearer {{adminToken}}

### 17. Estatísticas de Usuários - Semana
GET {{baseUrl}}/admin/stats/users?period=week&userType=CLIENT
Authorization: Bearer {{adminToken}}

### 18. Estatísticas de Usuários - Mês
GET {{baseUrl}}/admin/stats/users?period=month&userType=PROFESSIONAL
Authorization: Bearer {{adminToken}}

### 19. Estatísticas de Usuários - Ano
GET {{baseUrl}}/admin/stats/users?period=year&userType=ALL
Authorization: Bearer {{adminToken}}

### ========================================
### LOG DE AÇÕES ADMINISTRATIVAS
### ========================================

### 20. Buscar Todas as Ações
GET {{baseUrl}}/admin/actions?page=1&limit=50
Authorization: Bearer {{adminToken}}

### 21. Buscar Ações de um Admin Específico
GET {{baseUrl}}/admin/actions?adminId=clx_admin_id_aqui&page=1&limit=20
Authorization: Bearer {{adminToken}}

### 22. Buscar Ações por Tipo
GET {{baseUrl}}/admin/actions?action=USER_SUSPENDED&page=1&limit=20
Authorization: Bearer {{adminToken}}

### 23. Buscar Ações por Entidade
GET {{baseUrl}}/admin/actions?entityType=User&page=1&limit=20
Authorization: Bearer {{adminToken}}

### 24. Buscar Ações por Período
GET {{baseUrl}}/admin/actions?startDate=2025-10-01T00:00:00Z&endDate=2025-10-31T23:59:59Z&page=1&limit=50
Authorization: Bearer {{adminToken}}

### ========================================
### TESTES DE PERMISSÕES
### ========================================

### 25. Teste - Sem Token (deve retornar 401)
GET {{baseUrl}}/admin/dashboard

### 26. Teste - Token Inválido (deve retornar 401)
GET {{baseUrl}}/admin/dashboard
Authorization: Bearer token_invalido_aqui

### ========================================
### NOTAS
### ========================================

# Credenciais do Super Admin (criadas via seed):
# Email: admin@quezi.com
# Senha: Admin@2025
#
# ⚠️ IMPORTANTE: Trocar senha em produção!
#
# O token JWT tem validade de 8 horas
# Após expirar, fazer login novamente
#
# Para criar novos admins, use o endpoint POST /admin/admins
# Apenas SUPER_ADMIN pode criar outros admins