### 游댏 Testes de Autentica칞칚o - Quezi API
### Use a extens칚o REST Client no VS Code

@baseUrl = http://localhost:3333/api/v1
@token = 

### ========================================
### REGISTRO E LOGIN
### ========================================

### 1. Registrar Novo Usu치rio (Cliente)
# @name signup_client
POST {{baseUrl}}/auth/sign-up/email
Content-Type: application/json

{
  "email": "cliente1@teste.com",
  "password": "SenhaForte123",
  "name": "Jo칚o Silva Cliente"
}

### Copie o token da resposta acima e cole na vari치vel @token

###

### 2. Registrar Profissional
# @name signup_professional
POST {{baseUrl}}/auth/sign-up/email
Content-Type: application/json

{
  "email": "profissional1@teste.com",
  "password": "SenhaSegura456",
  "name": "Maria Santos Profissional"
}

###

### 3. Login com Email/Senha
# @name login
POST {{baseUrl}}/auth/sign-in/email
Content-Type: application/json

{
  "email": "cliente1@teste.com",
  "password": "SenhaForte123"
}

### 丘멆잺 COPIE O TOKEN DA RESPOSTA ACIMA E COLE NA VARI츼VEL @token NO TOPO DO ARQUIVO

###

### ========================================
### ROTAS PROTEGIDAS (REQUER TOKEN)
### ========================================

### 4. Obter Perfil do Usu치rio Autenticado
GET {{baseUrl}}/auth/me
Authorization: Bearer {{token}}

###

### 5. Obter Sess칚o Atual
GET {{baseUrl}}/auth/session
Authorization: Bearer {{token}}

###

### 6. Logout
POST {{baseUrl}}/auth/sign-out
Authorization: Bearer {{token}}

###

### ========================================
### RECUPERA칂츾O DE SENHA
### ========================================

### 7. Esqueci Minha Senha
POST {{baseUrl}}/auth/forgot-password
Content-Type: application/json

{
  "email": "cliente1@teste.com"
}

###

### 8. Resetar Senha
POST {{baseUrl}}/auth/reset-password
Content-Type: application/json

{
  "token": "reset-token-from-email",
  "password": "NovaSenhaForte789"
}

###

### ========================================
### SOCIAL OAUTH (CONFIGURAR PRIMEIRO)
### ========================================

### 9. Login com Google (abre no navegador)
GET {{baseUrl}}/auth/signin/google

###

### 10. Login com GitHub (abre no navegador)
GET {{baseUrl}}/auth/signin/github

###

### ========================================
### TWO-FACTOR AUTHENTICATION (2FA)
### ========================================

### 11. Habilitar 2FA
POST {{baseUrl}}/auth/two-factor/enable
Authorization: Bearer {{token}}

### Resposta ter치 QR Code para escanear no Google Authenticator

###

### 12. Verificar C칩digo 2FA
POST {{baseUrl}}/auth/two-factor/verify
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "code": "123456"
}

###

### 13. Desabilitar 2FA
POST {{baseUrl}}/auth/two-factor/disable
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "password": "SenhaForte123"
}

###

### ========================================
### ORGANIZA칂칏ES E RBAC
### ========================================

### 14. Criar Organiza칞칚o
POST {{baseUrl}}/auth/organization
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "Sal칚o de Beleza XYZ",
  "slug": "salao-xyz"
}

###

### 15. Convidar Membro para Organiza칞칚o
POST {{baseUrl}}/auth/organization/invite
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "organizationId": "org-id-aqui",
  "email": "membro@example.com",
  "role": "member"
}

###

### 16. Listar Organiza칞칫es do Usu치rio
GET {{baseUrl}}/auth/organization/list
Authorization: Bearer {{token}}

###

### 17. Atualizar Role de Membro
PUT {{baseUrl}}/auth/organization/member/role
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "organizationId": "org-id-aqui",
  "memberId": "member-id-aqui",
  "role": "admin"
}

###

### ========================================
### TESTES DE VALIDA칂츾O
### ========================================

### 18. Erro: Email inv치lido
POST {{baseUrl}}/auth/sign-up/email
Content-Type: application/json

{
  "email": "email-sem-arroba",
  "password": "SenhaForte123",
  "name": "Teste"
}

###

### 19. Erro: Senha fraca (sem mai칰scula)
POST {{baseUrl}}/auth/sign-up/email
Content-Type: application/json

{
  "email": "teste@senha.com",
  "password": "senhafraca123",
  "name": "Teste Senha"
}

###

### 20. Erro: Senha muito curta
POST {{baseUrl}}/auth/sign-up/email
Content-Type: application/json

{
  "email": "teste@curta.com",
  "password": "Sen1",
  "name": "Teste Curta"
}

###

### 21. Erro: Email duplicado
POST {{baseUrl}}/auth/sign-up/email
Content-Type: application/json

{
  "email": "cliente1@teste.com",
  "password": "SenhaForte123",
  "name": "Duplicado"
}

###

### 22. Erro: Credenciais inv치lidas (senha errada)
POST {{baseUrl}}/auth/sign-in/email
Content-Type: application/json

{
  "email": "cliente1@teste.com",
  "password": "SenhaErrada999"
}

###

### 23. Erro: Usu치rio n칚o existe
POST {{baseUrl}}/auth/sign-in/email
Content-Type: application/json

{
  "email": "naoexiste@teste.com",
  "password": "SenhaQualquer123"
}

###

### 24. Erro: Acesso sem token
GET {{baseUrl}}/auth/me

###

### 25. Erro: Token inv치lido
GET {{baseUrl}}/auth/me
Authorization: Bearer token-invalido-123

